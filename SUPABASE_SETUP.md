# ğŸš€ Supabase ì„¤ì • ê°€ì´ë“œ

ì´ ë¬¸ì„œëŠ” IdeaFlow ë§ˆì¸ë“œë§µ ëŒ€ì‹œë³´ë“œë¥¼ **Supabase**ì™€ ì—°ë™í•˜ëŠ” ë°©ë²•ì„ ë‹¨ê³„ë³„ë¡œ ì•ˆë‚´í•©ë‹ˆë‹¤.

## ğŸ“Œ ëª©ì°¨
1. [Supabaseë€?](#supabaseë€)
2. [ì™œ Firebase ëŒ€ì‹  Supabaseë¥¼ ì„ íƒí–ˆë‚˜ìš”?](#ì™œ-firebase-ëŒ€ì‹ -supabaseë¥¼-ì„ íƒí–ˆë‚˜ìš”)
3. [Supabase í”„ë¡œì íŠ¸ ìƒì„±](#supabase-í”„ë¡œì íŠ¸-ìƒì„±)
4. [ë°ì´í„°ë² ì´ìŠ¤ ì„¤ì •](#ë°ì´í„°ë² ì´ìŠ¤-ì„¤ì •)
5. [ì¸ì¦ ì„¤ì • (Google, GitHub)](#ì¸ì¦-ì„¤ì •)
6. [ì• í”Œë¦¬ì¼€ì´ì…˜ ì—°ë™](#ì• í”Œë¦¬ì¼€ì´ì…˜-ì—°ë™)
7. [ë¬¸ì œ í•´ê²°](#ë¬¸ì œ-í•´ê²°)

---

## ğŸ¯ Supabaseë€?

**Supabase**ëŠ” "ì˜¤í”ˆì†ŒìŠ¤ Firebase ëŒ€ì•ˆ"ìœ¼ë¡œ ë¶ˆë¦¬ëŠ” BaaS(Backend as a Service) í”Œë«í¼ì…ë‹ˆë‹¤.

### í•µì‹¬ ê¸°ëŠ¥
- **PostgreSQL ë°ì´í„°ë² ì´ìŠ¤** - ê°•ë ¥í•œ ê´€ê³„í˜• ë°ì´í„°ë² ì´ìŠ¤
- **ì‹¤ì‹œê°„ êµ¬ë…** - Firebase Realtime Databaseì™€ ìœ ì‚¬í•œ ê¸°ëŠ¥
- **ì¸ì¦ ì‹œìŠ¤í…œ** - Google, GitHub ë“± ì†Œì…œ ë¡œê·¸ì¸ ì§€ì›
- **Row Level Security** - ë°ì´í„° ì ‘ê·¼ ì œì–´
- **RESTful API** - ìë™ ìƒì„±ë˜ëŠ” API
- **Storage** - íŒŒì¼ ì €ì¥ ê¸°ëŠ¥

---

## ğŸ’¡ ì™œ Firebase ëŒ€ì‹  Supabaseë¥¼ ì„ íƒí–ˆë‚˜ìš”?

| íŠ¹ì§• | Firebase | Supabase |
|------|----------|----------|
| **ë°ì´í„°ë² ì´ìŠ¤** | NoSQL (Firestore) | PostgreSQL (SQL) |
| **ì„¤ì • ë³µì¡ë„** | â­â­â­â­ (ë³µì¡) | â­â­ (ê°„ë‹¨) |
| **SQL ì¿¼ë¦¬** | âŒ ë¶ˆê°€ëŠ¥ | âœ… ê°€ëŠ¥ |
| **ì˜¤í”ˆì†ŒìŠ¤** | âŒ | âœ… |
| **ê°€ê²©** | ë¬´ë£Œ â†’ ìœ ë£Œ (ë‹¨ê³„ì ) | ë¬´ë£Œ í”Œëœ ì¶©ë¶„ |
| **í•™ìŠµ ê³¡ì„ ** | ê°€íŒŒë¦„ | ì™„ë§Œí•¨ |
| **ë²¤ë” ì¢…ì†ì„±** | ë†’ìŒ | ë‚®ìŒ |

### Supabaseì˜ ì¥ì 
1. **PostgreSQL ê¸°ë°˜** - SQLì„ ì•Œê³  ìˆë‹¤ë©´ ì¦‰ì‹œ ì‚¬ìš© ê°€ëŠ¥
2. **ì§ê´€ì ì¸ ëŒ€ì‹œë³´ë“œ** - ë°ì´í„° ê´€ë¦¬ê°€ ì‰¬ì›€
3. **Row Level Security** - ì½”ë“œ ì—†ì´ ë³´ì•ˆ ê·œì¹™ ì„¤ì •
4. **ìë™ API ìƒì„±** - í…Œì´ë¸” ìƒì„± ì‹œ REST API ìë™ ì œê³µ
5. **GitHub ê¸°ë°˜ ì›Œí¬í”Œë¡œìš°** - Gitê³¼ ìì—°ìŠ¤ëŸ½ê²Œ í†µí•©

---

## ğŸ›  Supabase í”„ë¡œì íŠ¸ ìƒì„±

### 1ë‹¨ê³„: ê³„ì • ìƒì„±
1. [supabase.com](https://supabase.com) ì ‘ì†
2. **"Start your project"** í´ë¦­
3. **GitHub ê³„ì •ìœ¼ë¡œ ë¡œê·¸ì¸** (ê¶Œì¥)

### 2ë‹¨ê³„: ìƒˆ í”„ë¡œì íŠ¸ ìƒì„±
1. ëŒ€ì‹œë³´ë“œì—ì„œ **"New Project"** í´ë¦­
2. ë‹¤ìŒ ì •ë³´ ì…ë ¥:
   ```
   Name: ideaflow-mindmap
   Database Password: [ê°•ë ¥í•œ ë¹„ë°€ë²ˆí˜¸ ì…ë ¥ - ê¼­ ì €ì¥í•˜ì„¸ìš”!]
   Region: Northeast Asia (Seoul) - ê°€ì¥ ê°€ê¹Œìš´ ë¦¬ì „ ì„ íƒ
   Pricing Plan: Free (ë¬´ë£Œ)
   ```
3. **"Create new project"** í´ë¦­
4. í”„ë¡œì íŠ¸ ìƒì„± ëŒ€ê¸° (ì•½ 2ë¶„ ì†Œìš”)

### 3ë‹¨ê³„: API í‚¤ í™•ì¸
í”„ë¡œì íŠ¸ê°€ ìƒì„±ë˜ë©´ **Settings > API**ë¡œ ì´ë™:

```
Project URL: https://your-project.supabase.co
anon (public) key: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...
service_role key: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...
```

âš ï¸ **ì¤‘ìš”**: `service_role` í‚¤ëŠ” ì ˆëŒ€ í´ë¼ì´ì–¸íŠ¸ì— ë…¸ì¶œí•˜ì§€ ë§ˆì„¸ìš”!

---

## ğŸ’¾ ë°ì´í„°ë² ì´ìŠ¤ ì„¤ì •

### 1ë‹¨ê³„: SQL ì—ë””í„°ë¡œ í…Œì´ë¸” ìƒì„±

Supabase ëŒ€ì‹œë³´ë“œì—ì„œ **SQL Editor** íƒ­ìœ¼ë¡œ ì´ë™ í›„ ì•„ë˜ SQL ì‹¤í–‰:

```sql
-- ë§ˆì¸ë“œë§µ ë°ì´í„° í…Œì´ë¸”
CREATE TABLE mindmaps (
  id UUID DEFAULT gen_random_uuid() PRIMARY KEY,
  user_id UUID REFERENCES auth.users(id) ON DELETE CASCADE,
  title TEXT NOT NULL DEFAULT 'ìƒˆ ë§ˆì¸ë“œë§µ',
  data JSONB NOT NULL,
  created_at TIMESTAMP WITH TIME ZONE DEFAULT timezone('utc'::text, now()) NOT NULL,
  updated_at TIMESTAMP WITH TIME ZONE DEFAULT timezone('utc'::text, now()) NOT NULL
);

-- RLS (Row Level Security) í™œì„±í™”
ALTER TABLE mindmaps ENABLE ROW LEVEL SECURITY;

-- ì‚¬ìš©ìëŠ” ìì‹ ì˜ ë§ˆì¸ë“œë§µë§Œ ì¡°íšŒ ê°€ëŠ¥
CREATE POLICY "ì‚¬ìš©ìëŠ” ìì‹ ì˜ ë§ˆì¸ë“œë§µë§Œ ì¡°íšŒ ê°€ëŠ¥"
  ON mindmaps FOR SELECT
  USING (auth.uid() = user_id);

-- ì‚¬ìš©ìëŠ” ìì‹ ì˜ ë§ˆì¸ë“œë§µë§Œ ìƒì„± ê°€ëŠ¥
CREATE POLICY "ì‚¬ìš©ìëŠ” ìì‹ ì˜ ë§ˆì¸ë“œë§µë§Œ ìƒì„± ê°€ëŠ¥"
  ON mindmaps FOR INSERT
  WITH CHECK (auth.uid() = user_id);

-- ì‚¬ìš©ìëŠ” ìì‹ ì˜ ë§ˆì¸ë“œë§µë§Œ ìˆ˜ì • ê°€ëŠ¥
CREATE POLICY "ì‚¬ìš©ìëŠ” ìì‹ ì˜ ë§ˆì¸ë“œë§µë§Œ ìˆ˜ì • ê°€ëŠ¥"
  ON mindmaps FOR UPDATE
  USING (auth.uid() = user_id);

-- ì‚¬ìš©ìëŠ” ìì‹ ì˜ ë§ˆì¸ë“œë§µë§Œ ì‚­ì œ ê°€ëŠ¥
CREATE POLICY "ì‚¬ìš©ìëŠ” ìì‹ ì˜ ë§ˆì¸ë“œë§µë§Œ ì‚­ì œ ê°€ëŠ¥"
  ON mindmaps FOR DELETE
  USING (auth.uid() = user_id);

-- ì¸ë±ìŠ¤ ìƒì„± (ì„±ëŠ¥ ìµœì í™”)
CREATE INDEX idx_mindmaps_user_id ON mindmaps(user_id);
CREATE INDEX idx_mindmaps_updated_at ON mindmaps(updated_at DESC);

-- ìë™ updated_at ì—…ë°ì´íŠ¸ í•¨ìˆ˜
CREATE OR REPLACE FUNCTION update_updated_at_column()
RETURNS TRIGGER AS $$
BEGIN
  NEW.updated_at = now();
  RETURN NEW;
END;
$$ LANGUAGE plpgsql;

-- íŠ¸ë¦¬ê±° ì„¤ì •
CREATE TRIGGER update_mindmaps_updated_at
  BEFORE UPDATE ON mindmaps
  FOR EACH ROW
  EXECUTE FUNCTION update_updated_at_column();
```

### 2ë‹¨ê³„: ì‹¤ì‹œê°„ êµ¬ë… í™œì„±í™”

**Database > Replication** íƒ­ìœ¼ë¡œ ì´ë™:
1. `mindmaps` í…Œì´ë¸” ì°¾ê¸°
2. **"Realtime"** í† ê¸€ì„ **ON**ìœ¼ë¡œ ë³€ê²½
3. ì´ì œ ë°ì´í„° ë³€ê²½ì´ ì‹¤ì‹œê°„ìœ¼ë¡œ êµ¬ë…ë©ë‹ˆë‹¤!

---

## ğŸ” ì¸ì¦ ì„¤ì •

### Google ë¡œê·¸ì¸ ì„¤ì •

1. **Authentication > Providers** íƒ­ìœ¼ë¡œ ì´ë™
2. **Google** ì œê³µì ì„ íƒ
3. **"Enable Sign in with Google"** í† ê¸€ ON

#### Google Cloud Console ì„¤ì •
1. [Google Cloud Console](https://console.cloud.google.com/) ì ‘ì†
2. ìƒˆ í”„ë¡œì íŠ¸ ìƒì„± ë˜ëŠ” ê¸°ì¡´ í”„ë¡œì íŠ¸ ì„ íƒ
3. **APIs & Services > OAuth consent screen** ì„¤ì •
4. **Credentials > Create Credentials > OAuth 2.0 Client ID**
5. ë‹¤ìŒ ì •ë³´ ì…ë ¥:
   ```
   Application type: Web application
   Name: IdeaFlow Mindmap
   Authorized redirect URIs: 
     https://your-project.supabase.co/auth/v1/callback
   ```
6. **Client ID**ì™€ **Client Secret** ë³µì‚¬
7. Supabaseì˜ Google ì œê³µì ì„¤ì •ì— ì…ë ¥

### GitHub ë¡œê·¸ì¸ ì„¤ì •

1. **Authentication > Providers** íƒ­ì—ì„œ **GitHub** ì„ íƒ
2. **"Enable Sign in with GitHub"** í† ê¸€ ON

#### GitHub OAuth App ì„¤ì •
1. [GitHub Settings > Developer settings > OAuth Apps](https://github.com/settings/developers) ì ‘ì†
2. **"New OAuth App"** í´ë¦­
3. ë‹¤ìŒ ì •ë³´ ì…ë ¥:
   ```
   Application name: IdeaFlow Mindmap
   Homepage URL: https://your-domain.com (ë˜ëŠ” http://localhost:8000)
   Authorization callback URL: 
     https://your-project.supabase.co/auth/v1/callback
   ```
4. **Client ID**ì™€ **Client Secret** ë³µì‚¬
5. Supabaseì˜ GitHub ì œê³µì ì„¤ì •ì— ì…ë ¥

### ìŠ¹ì¸ëœ ë„ë©”ì¸ ì¶”ê°€

**Authentication > URL Configuration**ì—ì„œ:
```
Site URL: https://your-domain.com
Redirect URLs: 
  http://localhost:8000
  https://your-domain.com
```

---

## ğŸ”Œ ì• í”Œë¦¬ì¼€ì´ì…˜ ì—°ë™

### 1ë‹¨ê³„: HTML íŒŒì¼ ìˆ˜ì •

ë£¨íŠ¸ `index.html` íŒŒì¼(Supabase Edition)ì„ ì‚¬ìš©í•˜ê±°ë‚˜ `index-firebase.html`ì„ ë³µì‚¬í•´ Supabase ì„¤ì •ì„ ì ìš©í•˜ì„¸ìš”:

```html
<!-- Supabase SDK -->
<script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
<script src="js/supabase-config.js"></script>
```

### 2ë‹¨ê³„: í™˜ê²½ ë³€ìˆ˜ ì„¤ì •

í”„ë¡œì íŠ¸ ë£¨íŠ¸ì— `.env.local` íŒŒì¼ ìƒì„± (Gitì— ì»¤ë°‹í•˜ì§€ ë§ˆì„¸ìš”!):

```env
SUPABASE_URL=https://your-project.supabase.co
SUPABASE_ANON_KEY=your-anon-key-here
```

ë˜ëŠ” JavaScript íŒŒì¼ì—ì„œ ì§ì ‘ ì„¤ì •:

```javascript
// js/supabase-config.js
const SUPABASE_URL = 'https://your-project.supabase.co';
const SUPABASE_ANON_KEY = 'your-anon-key-here';
```

### 3ë‹¨ê³„: ë¡œì»¬ ì„œë²„ ì‹¤í–‰

```bash
# Python ì„œë²„
python -m http.server 8000

# ë˜ëŠ” Node.js ì„œë²„
npx serve .
```

ë¸Œë¼ìš°ì €ì—ì„œ `http://localhost:8000/index.html` ì ‘ì†

---

## ğŸ” ì£¼ìš” ê¸°ëŠ¥ ì‚¬ìš©ë²•

### ë¡œê·¸ì¸í•˜ê¸°
1. ìš°ì¸¡ ìƒë‹¨ì˜ **"Google"** ë˜ëŠ” **"GitHub"** ë²„íŠ¼ í´ë¦­
2. íŒì—… ì°½ì—ì„œ ê³„ì • ì„ íƒ ë° ìŠ¹ì¸
3. ìë™ìœ¼ë¡œ ë¡œê·¸ì¸ ìƒíƒœ ìœ ì§€

### ë§ˆì¸ë“œë§µ ì €ì¥
- ë…¸ë“œë¥¼ ì¶”ê°€/ìˆ˜ì •/ì‚­ì œí•˜ë©´ **ìë™ìœ¼ë¡œ Supabaseì— ì €ì¥**ë©ë‹ˆë‹¤
- ì €ì¥ ìƒíƒœëŠ” ì¢Œì¸¡ í•˜ë‹¨ì— í‘œì‹œë©ë‹ˆë‹¤

### ì‹¤ì‹œê°„ ë™ê¸°í™”
- ë‹¤ë¥¸ ê¸°ê¸°ì—ì„œ ë™ì¼í•œ ê³„ì •ìœ¼ë¡œ ë¡œê·¸ì¸í•˜ë©´
- ë§ˆì¸ë“œë§µì´ **ì‹¤ì‹œê°„ìœ¼ë¡œ ë™ê¸°í™”**ë©ë‹ˆë‹¤
- ë³€ê²½ì‚¬í•­ì´ ì¦‰ì‹œ ë°˜ì˜ë©ë‹ˆë‹¤

---

## ğŸ› ë¬¸ì œ í•´ê²°

### 1. ë¡œê·¸ì¸ íŒì—…ì´ ì°¨ë‹¨ë¨
**í•´ê²° ë°©ë²•:**
- ë¸Œë¼ìš°ì € ì£¼ì†Œì°½ ì˜¤ë¥¸ìª½ì˜ íŒì—… ì°¨ë‹¨ ì•„ì´ì½˜ í´ë¦­
- `https://your-project.supabase.co` ë„ë©”ì¸ í—ˆìš©

### 2. "Auth session missing!" ì—ëŸ¬
**ì›ì¸:** Supabase URL ë˜ëŠ” Anon Keyê°€ ì˜ëª»ë˜ì—ˆìŠµë‹ˆë‹¤.

**í•´ê²° ë°©ë²•:**
1. Supabase ëŒ€ì‹œë³´ë“œì—ì„œ API í‚¤ ë‹¤ì‹œ í™•ì¸
2. `js/supabase-config.js` íŒŒì¼ì˜ í‚¤ê°€ ì˜¬ë°”ë¥¸ì§€ í™•ì¸
3. í˜ì´ì§€ ìƒˆë¡œê³ ì¹¨ (Ctrl + F5)

### 3. ë°ì´í„°ê°€ ì €ì¥ë˜ì§€ ì•ŠìŒ
**ì›ì¸:** Row Level Security ì •ì±…ì´ ì˜ëª»ë˜ì—ˆê±°ë‚˜ ë¡œê·¸ì¸í•˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤.

**í•´ê²° ë°©ë²•:**
1. ë¡œê·¸ì¸ ìƒíƒœ í™•ì¸ (ìš°ì¸¡ ìƒë‹¨ì— í”„ë¡œí•„ ì‚¬ì§„ í‘œì‹œ)
2. Supabase ëŒ€ì‹œë³´ë“œ > **Database > Tables > mindmaps** í™•ì¸
3. RLS ì •ì±…ì´ ì˜¬ë°”ë¥´ê²Œ ì„¤ì •ë˜ì—ˆëŠ”ì§€ í™•ì¸

### 4. CORS ì—ëŸ¬
**ì›ì¸:** ë¡œì»¬ íŒŒì¼ì„ ì§ì ‘ ì—´ì—ˆìŠµë‹ˆë‹¤ (file:///)

**í•´ê²° ë°©ë²•:**
- ë°˜ë“œì‹œ ë¡œì»¬ ì„œë²„ë¥¼ í†µí•´ ì ‘ì†í•˜ì„¸ìš”:
  ```bash
  python -m http.server 8000
  # ê·¸ë¦¬ê³  http://localhost:8000 ì ‘ì†
  ```

### 5. ì‹¤ì‹œê°„ ë™ê¸°í™”ê°€ ì‘ë™í•˜ì§€ ì•ŠìŒ
**í•´ê²° ë°©ë²•:**
1. Supabase ëŒ€ì‹œë³´ë“œ > **Database > Replication** í™•ì¸
2. `mindmaps` í…Œì´ë¸”ì˜ Realtimeì´ í™œì„±í™”ë˜ì–´ ìˆëŠ”ì§€ í™•ì¸
3. ë¸Œë¼ìš°ì € ì½˜ì†”ì—ì„œ WebSocket ì—°ê²° ìƒíƒœ í™•ì¸

---

## ğŸ“Š ë°ì´í„° êµ¬ì¡°

Supabase `mindmaps` í…Œì´ë¸” êµ¬ì¡°:

| ì»¬ëŸ¼ëª… | íƒ€ì… | ì„¤ëª… |
|--------|------|------|
| `id` | UUID | ë§ˆì¸ë“œë§µ ê³ ìœ  ID (ìë™ ìƒì„±) |
| `user_id` | UUID | ì‚¬ìš©ì ID (auth.users ì°¸ì¡°) |
| `title` | TEXT | ë§ˆì¸ë“œë§µ ì œëª© |
| `data` | JSONB | ë…¸ë“œ, ì—°ê²°ì„ , ì¤Œ ë“± ì „ì²´ ë°ì´í„° |
| `created_at` | TIMESTAMP | ìƒì„± ì‹œê° |
| `updated_at` | TIMESTAMP | ìˆ˜ì • ì‹œê° (ìë™ ì—…ë°ì´íŠ¸) |

### data ì»¬ëŸ¼ JSON êµ¬ì¡° ì˜ˆì‹œ
```json
{
  "version": "2.0.0",
  "nodes": [
    {
      "id": "node-1",
      "content": "ì¤‘ì•™ ì•„ì´ë””ì–´",
      "x": 400,
      "y": 300,
      "color": "#3B82F6",
      "size": "large",
      "memo": "ë©”ëª¨ ë‚´ìš©",
      "url": "https://example.com"
    }
  ],
  "connections": [
    {
      "id": "conn-1",
      "from": "node-1",
      "to": "node-2"
    }
  ],
  "zoom": 1,
  "pan": { "x": 0, "y": 0 }
}
```

---

## ğŸš€ ë°°í¬í•˜ê¸°

### Vercel ë°°í¬ (ê¶Œì¥)

1. GitHub ì €ì¥ì†Œì— í‘¸ì‹œ
2. [vercel.com](https://vercel.com) ì ‘ì†
3. **"Import Project"** í´ë¦­
4. GitHub ì €ì¥ì†Œ ì„ íƒ
5. í™˜ê²½ ë³€ìˆ˜ ì„¤ì •:
   ```
   SUPABASE_URL=https://your-project.supabase.co
   SUPABASE_ANON_KEY=your-anon-key
   ```
6. **"Deploy"** í´ë¦­

### Netlify ë°°í¬

1. GitHub ì €ì¥ì†Œì— í‘¸ì‹œ
2. [netlify.com](https://netlify.com) ì ‘ì†
3. **"New site from Git"** í´ë¦­
4. GitHub ì €ì¥ì†Œ ì„ íƒ
5. Build settings:
   ```
   Build command: (ë¹„ì›Œë‘ )
   Publish directory: .
   ```
6. í™˜ê²½ ë³€ìˆ˜ ì„¤ì • (Vercelê³¼ ë™ì¼)
7. **"Deploy site"** í´ë¦­

---

## ğŸ“š ì¶”ê°€ ë¦¬ì†ŒìŠ¤

- [Supabase ê³µì‹ ë¬¸ì„œ](https://supabase.com/docs)
- [Supabase JavaScript í´ë¼ì´ì–¸íŠ¸](https://supabase.com/docs/reference/javascript/introduction)
- [PostgreSQL íŠœí† ë¦¬ì–¼](https://www.postgresqltutorial.com/)
- [Row Level Security ê°€ì´ë“œ](https://supabase.com/docs/guides/auth/row-level-security)

---

## ğŸ’¬ ì§€ì›

ë¬¸ì œê°€ ë°œìƒí•˜ë©´ ë‹¤ìŒì„ í™•ì¸í•˜ì„¸ìš”:
1. ë¸Œë¼ìš°ì € ê°œë°œì ë„êµ¬ ì½˜ì†” (F12)
2. Supabase ëŒ€ì‹œë³´ë“œì˜ Logs íƒ­
3. GitHub Issuesì— ì§ˆë¬¸ ì˜¬ë¦¬ê¸°

**Made with â¤ï¸ by AI-Powered Development**

*ë²„ì „: 2.0.0 | Supabase Edition | ìµœì¢… ì—…ë°ì´íŠ¸: 2025-11-14*
